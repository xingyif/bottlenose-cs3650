<% @page_title = @course.name %>

<div class="page-header">
  <h1><%= @course.name %></h1>
</div>

<div class="row">
  <div class="col-md-6">
    <% @course.buckets_sorted.each do |bucket| %>
      <h2><%= bucket.name %></h2>
      <table class="table table-striped">
        <thead>
          <th>Name</th>
          <th>Due Date</th>
          <th>Team</th>
        </thead>
        <tbody>
        <% bucket.assignments.order(:name).each do |assignment| %>
          <tr>
            <td><%= link_to assignment.name, course_assignment_path(@course, assignment) %></td>
            <td><%= assignment.due_date %></td>
            <td><%= assignment.team_subs ? "Yes" : "No" %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% end %>
  </div>

  <div class="col-md-6">
    <h2>Current Team</h2>
    <% active_team = current_user.active_team_for(@course) %>
    <% if active_team %>
      <%= link_to course_team_path(@course, active_team) do %>
        <span><%= active_team.member_names %></span>
      <% end %>
    <% else %>
      No active team.
    <% end %>

    <h2>All Teams</h2>
    <ul>
      <% current_user.teams_for(@course).each do |team| %>
        <li><%= link_to team.member_names, course_team_path(@course, team) %></li>
      <% end %>
    </ul>
  </div>
</div>
